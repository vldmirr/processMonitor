events {
    worker_connections 1024;
}

http {
    include /etc/nginx/mime.types;
    default_type application/octet-stream;

    # Логирование
    access_log /var/log/nginx/access.log;
    error_log /var/log/nginx/error.log;

    # SSL настройки
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;
    ssl_prefer_server_ciphers on;

    server {
        listen 443 ssl;
        server_name test.com;

        ssl_certificate /etc/nginx/ssl/server.crt;
        ssl_certificate_key /etc/nginx/ssl/server.key;

        # Monitoring endpoint
        location /monitoring/test/api {
            default_type application/json;
            return 200 '{"status": "ok", "message": "Monitoring endpoint working", "timestamp": "$time_local", "server": "test.com"}';
            add_header Content-Type application/json;
        }

        # Health check
        location /health {
            return 200 'healthy\n';
            add_header Content-Type text/plain;
        }
    }
}
